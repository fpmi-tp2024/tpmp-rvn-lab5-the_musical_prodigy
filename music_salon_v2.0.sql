BEGIN TRANSACTION;
CREATE TABLE IF NOT EXISTS "AUTHOR" (
	"author_id"	integer NOT NULL,
	"name"	text NOT NULL,
	CONSTRAINT "AUTHOR_pk" PRIMARY KEY("author_id")
);
CREATE TABLE IF NOT EXISTS "CD" (
	"CD_id"	integer NOT NULL,
	"manufacture_year"	integer NOT NULL,
	"manufacturer"	text NOT NULL,
	"amount_in_stock"	integer NOT NULL,
	"price"	real NOT NULL,
	CONSTRAINT "CD_pk" PRIMARY KEY("CD_id")
);
CREATE TABLE IF NOT EXISTS "OPERATION" (
	"operation_id"	integer NOT NULL,
	"operation_type_id"	integer NOT NULL,
	"date"	date NOT NULL,
	CONSTRAINT "OPERATION_OPERATION_TYPE" FOREIGN KEY("operation_type_id") REFERENCES "OPERATION_TYPE"("operation_type_id"),
	CONSTRAINT "OPERATION_pk" PRIMARY KEY("operation_id")
);
CREATE TABLE IF NOT EXISTS "OPERATION_TYPE" (
	"operation_type_id"	integer NOT NULL,
	"operation_name"	text NOT NULL,
	CONSTRAINT "OPERATION_TYPE_pk" PRIMARY KEY("operation_type_id")
);
CREATE TABLE IF NOT EXISTS "PERFORMER" (
	"performer_id"	integer NOT NULL,
	"name"	text NOT NULL,
	CONSTRAINT "PERFORMER_pk" PRIMARY KEY("performer_id")
);
CREATE TABLE IF NOT EXISTS "USER" (
	"user_id"	integer NOT NULL,
	"user_role_id"	integer NOT NULL,
	"login"	text NOT NULL,
	"password"	text NOT NULL,
	CONSTRAINT "USER_USER_ROLE" FOREIGN KEY("user_role_id") REFERENCES "USER_ROLE"("user_role_id"),
	CONSTRAINT "USER_pk" PRIMARY KEY("user_id")
);
CREATE TABLE IF NOT EXISTS "USER_ROLE" (
	"user_role_id"	integer NOT NULL,
	"role_name"	text NOT NULL,
	CONSTRAINT "USER_ROLE_pk" PRIMARY KEY("user_role_id")
);
CREATE TABLE IF NOT EXISTS "MUSICAL_COMPOSITION" (
	"composition_id"	INTEGER,
	"composition_name"	TEXT,
	PRIMARY KEY("composition_id")
);
CREATE TABLE IF NOT EXISTS "m2m_MUSICAL_COMPOSITION_AUTHOR" (
	"composition_id"	INTEGER,
	"author_id"	INTEGER,
	FOREIGN KEY("composition_id") REFERENCES "MUSICAL_COMPOSITION"("composition_id"),
	FOREIGN KEY("author_id") REFERENCES "AUTHOR"("author_id"),
	PRIMARY KEY("composition_id","author_id")
);
CREATE TABLE IF NOT EXISTS "m2m_MUSICAL_COMPOSITION_CD" (
	"CD_code"	INTEGER,
	"composition_id"	INTEGER,
	FOREIGN KEY("composition_id") REFERENCES "MUSICAL_COMPOSITION"("composition_id"),
	FOREIGN KEY("CD_code") REFERENCES "CD"("CD_id"),
	PRIMARY KEY("CD_code","composition_id")
);
CREATE TABLE IF NOT EXISTS "m2m_MUSICAL_COMPOSITION_PERFORMER" (
	"composition_id"	INTEGER,
	"performer_id"	INTEGER,
	FOREIGN KEY("composition_id") REFERENCES "MUSICAL_COMPOSITION"("composition_id"),
	FOREIGN KEY("performer_id") REFERENCES "PERFORMER"("performer_id"),
	PRIMARY KEY("composition_id","performer_id")
);
CREATE TABLE IF NOT EXISTS "OPERATION_CDs" (
	"operation_id"	INTEGER NOT NULL,
	"CD_id"	integer NOT NULL,
	"quantity"	integer NOT NULL,
	CONSTRAINT "OPERATION_CDs_OPERATION" FOREIGN KEY("operation_id") REFERENCES "OPERATION"("operation_id"),
	CONSTRAINT "OPERATION_CDs_CD" FOREIGN KEY("CD_id") REFERENCES "CD"("CD_id"),
	PRIMARY KEY("operation_id")
);
INSERT INTO "AUTHOR" ("author_id","name") VALUES (1,'Tyler Joseph'),
 (2,'Paul Meaney'),
 (3,'Till Lindemann'),
 (4,'Thomas Bangalter'),
 (5,'Guy-Manuel de Homem-Christo'),
 (6,'Stefani Joanne Angelina Germanotta'),
 (7,'Katheryn Elizabeth Hudson'),
 (8,'Amy Lynn Lee'),
 (9,'Chris Martin'),
 (10,'Josh Dun'),
 (11,'David Guetta');
INSERT INTO "CD" ("CD_id","manufacture_year","manufacturer","amount_in_stock","price") VALUES (1,2018,'Fueled By Ramen LLC',93,10.0),
 (2,2001,'Universal Music',87,9.5),
 (3,2013,'Columbia Records',80,12.95);
INSERT INTO "OPERATION_TYPE" ("operation_type_id","operation_name") VALUES (1,'Sell'),
 (2,'Receive');
 
INSERT INTO "PERFORMER" ("performer_id","name") VALUES (1,'Twenty One Pilots'),
 (2,'Rammstein'),
 (3,'Daft Punk'),
 (4,'Lady Gaga'),
 (5,'Katy Perry'),
 (6,'Evanescence'),
 (7,'Coldplay'),
 (8,'Pink Floyd'),
 (9,'Led Zeppelin'),
 (10,'Depeche Mode'),
 (11,'Modern Talking'),
 (12,'Imagine Dragons'),
 (13,'Nirvana'),
 (14,'Rage Against The machines'),
 (15,'Julian Casablancas');
 
INSERT INTO "USER_ROLE" ("user_role_id","role_name") VALUES (1,'Admin'),
 (2,'User');
 
INSERT INTO "MUSICAL_COMPOSITION" ("composition_id","composition_name") VALUES (1,'Jumpsuit'),
 (2,'Levitate'),
 (3,'Morph'),
 (4,'My Blood'),
 (5,'Chlorine'),
 (6,'Smithereens'),
 (7,'Neon Gravestones'),
 (8,'Nico And The Niners'),
 (9,'Cut My Lip'),
 (10,'Bandito'),
 (11,'Pet Cheetah'),
 (12,'Legend'),
 (13,'The Hype'),
 (14,'Leave The City'),
 (15,'Mein Herz Brennt'),
 (16,'Links 2 3 4'),
 (17,'Sonne'),
 (18,'Ich Will'),
 (19,'Feuer Frei!'),
 (20,'Mutter'),
 (21,'Spieluhr'),
 (22,'Zwitter'),
 (23,'Rein Raus'),
 (24,'Adios'),
 (25,'Nebel'),
 (26,'Give Life Back To Music'),
 (27,'The Game Of Love'),
 (28,'Giorgio By Moroder'),
 (29,'Within'),
 (30,'Instant Crush'),
 (31,'Lose Yourself To Dance'),
 (32,'Touch'),
 (33,'Get Lucky'),
 (34,'Beyond'),
 (35,'Motherboard'),
 (36,'Fragments Of Time'),
 (37,'Doin'' It Right'),
 (38,'Contact');
 
INSERT INTO "OPERATION" ("operation_id","operation_type_id","date") VALUES (1,2,'2024-01-01'),
 (2,2,'2024-01-01'),
 (3,2,'2024-01-01'),
 (4,1,'2024-01-02'),
 (5,1,'2024-01-02'),
 (6,1,'2024-01-02'),
 (7,1,'2024-01-12'),
 (8,1,'2024-01-18'),
 (9,2,'2024-04-18'),
 (10,2,'2024-04-18'),
 (11,2,'2024-04-18'),
 (12,1,'2024-04-18'),
 (13,1,'2024-04-18');

INSERT INTO "USER" ("user_id","user_role_id","login","password") VALUES (1,1,'mashagorelik','89e01536ac207279409d4de1e5253e01f4a1769e696db0d6062ca9b8f56767c8'),
 (2,1,'timofeykremko','ef92b778bafe771e89245b89ecbc08a44a4e166c06659911881f383d4473e94f'),
 (3,2,'user1','0b14d501a594442a01c6859541bcb3e8164d183d32937b851835442f69d5c94e'),
 (4,2,'user2','6cf615d5bcaac778352a8f1f3360d23f02f34ec182e259897fd6ce485d7870d4');

INSERT INTO "m2m_MUSICAL_COMPOSITION_AUTHOR" ("composition_id","author_id") VALUES (1,1),
 (1,2),
 (2,1),
 (2,2),
 (3,1),
 (3,2),
 (4,1),
 (4,2),
 (5,1),
 (5,2),
 (6,1),
 (6,2),
 (7,1),
 (7,2),
 (8,1),
 (8,2),
 (9,1),
 (9,2),
 (10,1),
 (10,2),
 (11,1),
 (11,2),
 (12,1),
 (12,2),
 (13,1),
 (13,2),
 (14,1),
 (14,2),
 (15,3),
 (16,3),
 (17,3),
 (18,3),
 (19,3),
 (20,3),
 (21,3),
 (22,3),
 (23,3),
 (24,3),
 (25,3),
 (26,4),
 (26,5),
 (27,4),
 (27,5),
 (28,4),
 (28,5),
 (29,4),
 (29,5),
 (30,4),
 (30,5),
 (31,4),
 (31,5),
 (32,4),
 (32,5),
 (33,4),
 (33,5),
 (34,4),
 (34,5),
 (35,4),
 (35,5),
 (36,4),
 (36,5),
 (37,4),
 (37,5),
 (38,4),
 (38,5);
INSERT INTO "m2m_MUSICAL_COMPOSITION_CD" ("CD_code","composition_id") VALUES (1,1),
 (1,2),
 (1,3),
 (1,4),
 (1,5),
 (1,6),
 (1,7),
 (1,8),
 (1,9),
 (1,10),
 (1,11),
 (1,12),
 (1,13),
 (1,14),
 (2,15),
 (2,17),
 (2,18),
 (2,19),
 (2,20),
 (2,21),
 (2,22),
 (2,23),
 (2,24),
 (2,25),
 (3,26),
 (3,27),
 (3,28),
 (3,29),
 (3,30),
 (3,31),
 (3,32),
 (3,33),
 (3,34),
 (3,35),
 (3,36),
 (3,37),
 (3,38);
INSERT INTO "m2m_MUSICAL_COMPOSITION_PERFORMER" ("composition_id","performer_id") VALUES (1,1),
 (2,1),
 (3,1),
 (4,1),
 (5,1),
 (6,1),
 (7,1),
 (8,1),
 (9,1),
 (10,1),
 (11,1),
 (12,1),
 (13,1),
 (14,1),
 (15,2),
 (16,2),
 (17,2),
 (18,2),
 (19,2),
 (20,2),
 (21,2),
 (22,2),
 (23,2),
 (24,2),
 (25,2),
 (26,3),
 (27,3),
 (28,3),
 (29,3),
 (30,3),
 (30,15),
 (31,3),
 (32,3),
 (33,3),
 (34,3),
 (35,3),
 (36,3),
 (37,3),
 (38,3);
INSERT INTO "OPERATION_CDs" ("operation_id","CD_id","quantity") VALUES (1,1,100),
 (2,2,100),
 (3,3,100),
 (4,1,12),
 (5,2,15),
 (6,3,11),
 (7,2,9),
 (8,3,14),
 (9,2,11),
 (10,1,15),
 (11,3,15),
 (12,1,10),
 (13,3,10);
COMMIT;

